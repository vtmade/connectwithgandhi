# Gandhi's Cinematic Journey - Setup Guide

## Overview

A vintage-styled scrollytelling experience that takes users through Gandhi's geographic journey with smooth camera movements and narrative chapters. Built with Leaflet for zero external dependencies.

## Features

- **Cinematic Design**: Vintage sepia aesthetic with Cinzel headings and Lora body text
- **Smooth Map Animations**: Leaflet with flyTo animations and sepia filter for vintage feel
- **10 Narrative Chapters**: Following Gandhi's life arc from Porbandar to Delhi
- **11,526 Documents**: Organized across 10 key locations
- **Sticky Sidecar Layout**: 40% scrolling narrative, 60% sticky map
- **No API Keys Required**: Uses Leaflet with open-source map tiles

## Setup Instructions

### 1. Install Dependencies

The journey experience uses Leaflet and Scrollama:

```bash
npm install
```

### 2. View the Journey

With the dev server running:

```bash
npm run dev
```

Navigate to:
- Landing page: http://localhost:5173/index_landing.html
- Journey directly: http://localhost:5173/journey.html

## Data Processing

The journey data is generated by:
```bash
cd /Users/vinaythakur/ClaudeC/Gandhi/processing
python3 prepare_cinematic_journey.py
```

This creates `/visualization/public/data/gandhi_journey.json` with:
- 10 story chapters in narrative order
- Coordinates and zoom levels for each location
- Top 5 documents per location
- Phase colors and labels

## Architecture

```
üìÅ visualization/
‚îú‚îÄ‚îÄ journey.html                    # Cinematic scrollytelling page
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ journey_cinematic.js       # Mapbox + Scrollama logic
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îî‚îÄ‚îÄ gandhi_journey.json    # Generated narrative data
‚îî‚îÄ‚îÄ processing/
    ‚îî‚îÄ‚îÄ prepare_cinematic_journey.py  # Data preparation script
```

## Narrative Flow

The chapters follow Gandhi's life arc (not strictly chronological):

1. **Porbandar** - The Birthplace (38 docs)
2. **Rajkot** - Early Education (482 docs)
3. **London** - Law Studies 1888-1891 (734 docs)
4. **Durban** - South Africa Awakening (519 docs)
5. **Johannesburg** - Satyagraha Born (959 docs)
6. **Sabarmati** - Ashram 1917-1930 (2,603 docs)
7. **Champaran** - Satyagraha 1917 (95 docs)
8. **Dandi** - Salt March 1930 (73 docs)
9. **Wardha** - Sevagram 1936-1948 (3,249 docs)
10. **Delhi** - The Final Days (2,774 docs)

## Design Principles

### Color Palette (Vintage Sepia)
- Background: `#fdf6e3`
- Card: `#f5ebd6`
- Accent: `#8c510a`
- Accent Light: `#bf812d`
- Text: `#3d2817`
- Text Light: `#705438`
- Border: `#dfc27d`

### Typography
- Headings: Cinzel (serif, elegant)
- Body: Lora (serif, readable)

### Camera Movement (Leaflet)
- Duration: 2.5 seconds for smooth flyTo
- Ease Linearity: 0.15 (dramatic easing curve)
- Sepia Filter: Applied to map tiles for vintage aesthetic
- Custom Markers: Phase-colored with pulse animations

## Customization

### Adjusting Camera Settings

In `src/journey_cinematic.js`, modify the `CONFIG.camera` object:

```javascript
camera: {
  duration: 2.5,        // Seconds for smooth flyTo (higher = slower)
  easeLinearity: 0.15   // Easing curve (0-1, lower = more dramatic)
}
```

### Changing Map Tile Style

Replace the tile layer in `initMap()` function:

```javascript
// Current: CartoDB Light (clean, sepia-friendly)
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {...})

// Alternative options:
// Stamen Terrain
L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png', {...})

// OpenStreetMap
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {...})
```

### Adjusting Sepia Filter

In `initMap()`, modify the filter values:

```javascript
// Current
mapContainer.style.filter = 'sepia(0.3) saturate(0.8) contrast(1.1)';

// More vintage
mapContainer.style.filter = 'sepia(0.5) saturate(0.6) contrast(1.2)';

// Less sepia
mapContainer.style.filter = 'sepia(0.1) saturate(0.9) contrast(1.0)';
```

### Adding More Locations

1. Edit `/processing/prepare_cinematic_journey.py`
2. Add location to `LOCATIONS` dictionary with coordinates, narrative, phase
3. Re-run: `python3 prepare_cinematic_journey.py`
4. Refresh browser

## Troubleshooting

### Map not showing?
- Check browser console for JavaScript errors
- Verify Leaflet loaded correctly
- Check that `gandhi_journey.json` exists in `/public/data/`
- Try hard refresh (Cmd+Shift+R or Ctrl+Shift+R)

### Scroll not triggering?
- Check browser console for JavaScript errors
- Verify Scrollama installed: `npm install scrollama`
- Try refreshing the page
- Check that chapters are rendering in left sidebar

### Styling looks wrong?
- Verify Google Fonts loaded (Cinzel, Lora)
- Check browser DevTools for CSS errors
- Clear browser cache
- Verify `journey.html` has proper CSS

### Markers not appearing?
- Check console for errors in `addLocationMarkers()`
- Verify journey data has `coordinates` for each chapter
- Check Leaflet marker creation in DevTools

## Technical Stack

- **Map**: Leaflet 1.9.4 (no API key required)
- **Scrollytelling**: Scrollama
- **Build**: Vite
- **Fonts**: Google Fonts (Cinzel, Lora)
- **Data**: 45,458 Gandhi documents (JSON)
- **Tiles**: CartoDB Light (open-source)

## Credits

Design inspired by the intersection of Cinema and Data Science - creating narrative experiences that marry storytelling with data visualization.
